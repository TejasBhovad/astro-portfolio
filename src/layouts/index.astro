---
import Navbar from "../components/Navbar.jsx";
---

<html lang="en" class="w-full h-full">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="viewport" content="width=device-width" />
    <meta name="generator" content={Astro.generator} />
    <title>Astro</title>
  </head>
  <body
    class="bg-lightBackground text-lightText dark:bg-darkBackground dark:text-darkText w-full h-full"
  >
    <Navbar />
    <slot />
  </body>
</html>

<script>
  const switchTheme = document.querySelector(
    "[data-switch-theme]"
  ) as HTMLButtonElement;

  if (
    localStorage.getItem("appTheme") === "dark" ||
    (!("appTheme" in localStorage) &&
      window.matchMedia("(prefers-color-scheme: dark)").matches)
  ) {
    document.documentElement.classList.add("dark");
  } else {
    document.documentElement.classList.remove("dark");
  }
  if (switchTheme) {
    switchTheme.addEventListener("click", (e) => {
      e.preventDefault();
      const doc = document.documentElement;
      if (doc) {
        if (localStorage.getItem("appTheme")) {
          if (localStorage.getItem("appTheme") === "light") {
            doc.classList.add("dark");
            localStorage.setItem("appTheme", "dark");
          } else {
            document.documentElement.classList.remove("dark");
            localStorage.setItem("appTheme", "light");
          }
        } else {
          if (doc.classList.contains("dark")) {
            doc.classList.remove("dark");
            localStorage.setItem("appTheme", "light");
          } else {
            doc.classList.add("dark");
            localStorage.setItem("appTheme", "dark");
          }
        }
      }
    });
  }
</script>
